<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>ADA Slope Compliance — Viewer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <style>html,body,#map{height:100%;margin:0} .legend{background:#fff;padding:6px 8px;border-radius:4px;line-height:1.4}</style>
</head>
<body>
<div id="map"></div>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
const map = L.map('map').setView([0,0], 2);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'© OSM'}).addTo(map);

fetch('paths_ada_eval.geojson')
  .then(r=>r.json())
  .then(gj=>{
    const layer = L.geoJSON(gj, {
      style: f => {
        const ok = (f.properties.running_ok && f.properties.cross_ok);
        return { color: ok ? '#2ecc71' : '#e74c3c', weight: 3 };
      },
      onEachFeature: (f, l) => {
        const r = f.properties.running_max, c = f.properties.cross_max;
        l.bindPopup(`running_max: ${Number(r).toFixed(2)}%<br/>cross_max: ${Number(c).toFixed(2)}%<br/>OK: ${f.properties.running_ok && f.properties.cross_ok}`);
      }
    }).addTo(map);
    map.fitBounds(layer.getBounds(), {padding:[20,20]});
  });
</script>
</body>
</html>
